<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="fragment" content="!">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="Keywords" content="GeoForm, GeoForm Template, Template, Map, Esri">
    <meta name="description"
          content="GeoForm is a configurable template for form based data editing of a Feature Service. This application allows users to enter data through a form instead of a map’s pop-up while leveraging the power of the Web Map and editable Feature Services.">
    <meta name="author" content="esri">
    <!-- Facebook -->
    <meta property="og:title" content="GeoForm">
    <meta property="og:image" content="images/item.png">
    <meta property="og:site_name" content="esri">
    <!-- Chrome for Android -->
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <title>GeoForm</title>
    <!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" type="text/css" href="js/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
          href="js/vendor/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://js.arcgis.com/3.24/esri/css/esri.css">
    <link rel="stylesheet" type="text/css" href="https://js.arcgis.com/3.24/dijit/themes/claro/claro.css">
    <link rel="stylesheet" type="text/css" href="js/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link id="rtlCSS" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="css/signIn.css">
    <link rel="stylesheet" type="text/css" href="css/resetPassword.css">
    <link href="js/vendor/select2/select2.min.css" rel="stylesheet"/>
    <link href="js/vendor/touch-spinner/jquery.bootstrap-touchspin.min.css" rel="stylesheet" type="text/css"/>
    <link href="css/registration.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="css/signIn.css" rel="stylesheet" type="text/css" media="screen"/>
    <link href="css/index.css" rel="stylesheet" type="text/css"/>
    <script src="js/vendor/jquery.min.js"></script>
    <script src="js/vendor/moment-with-langs.min.js"></script>
    <script src="js/vendor/html5shiv.min.js"></script>
    <script src="js/vendor/respond.min.js"></script>

</head>

<body id="geoform" class="claro app-loading">
<a id="top"><!-- Top of page --></a>
<div class="loading-indicator">
    <!--<div class="icon-loading"></div>-->
    <div class="container">
        <div id="navbar">

        </div>
        <style>.embed-container {
            position: relative;
            padding-bottom: 87%;
            height: 0;
            max-width: 89.5%;
        }

        .embed-container iframe, .embed-container object, .embed-container iframe {
            position: absolute;
            top: 3%;
            width: 89.5%;
            height: 90%;
        }

        small {
            position: absolute;
            z-index: 40;
            bottom: 0;
            margin-bottom: -15px;
        }</style>
        <div class="embed-container">
            <small><a
                    href="http://damian-galan.maps.arcgis.com/apps/Embed/index.html?webmap=516d939901dc40fa8f116efa9b59dfbf&extent=21.8953,50.988,23.3317,51.4362&home=true&zoom=true&scale=true&search=true&searchextent=true&disable_scroll=false&theme=light"
                    style="color:#0000FF;text-align:left" target="_blank">View larger map</a></small>
            <br>
            <iframe width="300" height="260" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
                    title="Zgłoszenia mieszkancow"
                    src="http://damian-galan.maps.arcgis.com/apps/Embed/index.html?webmap=516d939901dc40fa8f116efa9b59dfbf&extent=21.8953,50.988,23.3317,51.4362&home=true&zoom=true&previewImage=true&scale=true&search=true&searchextent=true&disable_scroll=false&theme=light"></iframe>
        </div>
        <div class="alert alert-danger"><span class="icon-frown"></span> <span id="loading_message"></span>
        </div>
    </div>
</div>
</div>
<div id="fullscreen_container" class="fullscreen-container"></div>
<div id="parentContainter" class="app-content"></div>
<script type="text/javascript">
    var package_path = window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));
    var dojoConfig = {
        async: true,
        has: {
            "esri-featurelayer-webgl": 1
        },
        // The locationPath logic below may look confusing but all its doing is
        // enabling us to load the api from a CDN and load local modules from the correct location.
        packages: [{
            name: "application",
            location: package_path + '/js'
        }, {
            name: "config",
            location: package_path + '/config'
        }, {
            name: "arcgis_templates",
            location: package_path + '/..'
        }, {
            name: "vendor",
            location: package_path + '/js/vendor'
        }, {
            name: "views",
            location: package_path + '/views'
        }]
    };
    // Have to handle a locale parameter before dojo is loaded
    if (location.search.match(/locale=([\w-]+)/)) {
        dojoConfig.locale = RegExp.$1;
    }
</script>
<script type="text/javascript" src="https://js.arcgis.com/3.24"></script>
<script type="text/javascript" src="js/vendor/offline/offline.min.js"></script>
<script type="text/javascript" src="js/vendor/IndexedDBShim.min.js"></script>
<script type="text/javascript">
    require(["config/templateConfig", "application/template", "application/main",], function (templateOptions, Template, Main) {
        // start template
        var myTemplate = new Template(templateOptions);
        // create my main application. Start placing your logic in the main.js file.
        var myApp = new Main();
        myApp.przyciski();

        // create my main application. Start placing your logic in the main.js file.
      /*  myTemplate.startup().then(function (config) {
            //The config object contains the following properties: helper services, (optionally)
            //i18n, appid, webmap and any custom values defined by the application.
            //In this example we have one called theme.
            /!*var appResponse = config.appResponse;
            if(config.appResponse){
              delete config.appResponse;
            }

            if (config.edit && config.appid) {
                // get the app builder code
                require(["application/builder/builder"], function (builderMode) {
                    // create configuration app builder
                    var builder = new builderMode(config, appResponse);
                    // start it
                    builder.startup().otherwise(function (error) {
                        // something went wrong. Let's report it.
                        myApp.reportError(error);
                    });
                });
            } else {
                //lets go!
                myApp.startup(config, appResponse);

                // var token;
                // $.getJSON("http://localhost:8080/ankieta-web/rest/auth/getAnonymousAccess", function (data) {
                //    token =data.arcGisToken;
                //
                //     $.ajax({
                //         contentType: "application/json",
                //         method:"POST",
                //         url: 'http://localhost/gis-expert-geoform/viewer.html?webmap=516d939901dc40fa8f116efa9b59dfbf',
                //         json:true,
                //         form: {
                //             f: 'json',
                //             token: token,
                //         },
                //         success: function(result,status,xhr){
                //             //
                //             console.log('result');
                //             $("#nazwa").append(xhr.responseText);
                //         },
                //         error: function(error, response, body) {
                //             console.log(body);
            }
            //         });
            //
            //
            //    });
            console.log();


        });



            }*!/
        }, function (error) {
            // something went wrong. Let's report it.
            myApp.reportError(error);
        });*/
    });
</script>
</body>

</html>